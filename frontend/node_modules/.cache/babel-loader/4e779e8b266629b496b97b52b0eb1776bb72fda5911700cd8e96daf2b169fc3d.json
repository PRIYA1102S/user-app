{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const UserManager=()=>{const[users,setUsers]=useState([]);const[newUserName,setNewUserName]=useState('');const[selectedUserId,setSelectedUserId]=useState('');const[awardedPoints,setAwardedPoints]=useState(null);const fetchLeaderboard=async()=>{try{const response=await axios.get(`${process.env.REACT_APP_API_URL}/api/leaderboard`);setUsers(response.data);}catch(error){console.error('Error fetching leaderboard:',error);}};useEffect(()=>{fetchLeaderboard();},[]);const handleAddUser=async()=>{if(newUserName.trim()){try{await axios.post(`${process.env.REACT_APP_API_URL}/api/users`,{name:newUserName});setNewUserName('');toast.success(\"User created successfully!\");fetchLeaderboard();}catch(error){console.error('Error adding user:',error);}}};const handleClaimPoints=async()=>{if(!selectedUserId)return;try{const response=await axios.post(`${process.env.REACT_APP_API_URL}/api/claim`,{userId:selectedUserId});setAwardedPoints(response.data.pointsClaimed);fetchLeaderboard();}catch(error){setAwardedPoints(null);alert('Error claiming points');}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4 text-blue-700\",children:\"User Manager\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex mb-6\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newUserName,onChange:e=>setNewUserName(e.target.value),placeholder:\"Enter new user name\",className:\"border border-gray-300 rounded-l px-4 py-2 w-full focus:outline-none\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddUser,className:\"bg-blue-600 text-white px-4 py-2 rounded-r hover:bg-blue-700\",children:\"Add User\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-2 text-blue-600\",children:\"Claim Points\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsxs(\"select\",{value:selectedUserId,onChange:e=>setSelectedUserId(e.target.value),className:\"border border-gray-300 rounded px-4 py-2 mr-2 focus:outline-none\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Select User --\"}),users.map(user=>/*#__PURE__*/_jsx(\"option\",{value:user._id,children:user.name},user._id))]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleClaimPoints,disabled:!selectedUserId,className:`px-4 py-2 rounded ${selectedUserId?'bg-green-600 hover:bg-green-700 text-white':'bg-gray-300 text-gray-500 cursor-not-allowed'}`,children:\"Claim Points\"})]}),awardedPoints!==null&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-green-700 font-semibold\",children:[\"Points Awarded: \",awardedPoints]})]})]});};export default UserManager;","map":{"version":3,"names":["React","useState","useEffect","axios","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UserManager","users","setUsers","newUserName","setNewUserName","selectedUserId","setSelectedUserId","awardedPoints","setAwardedPoints","fetchLeaderboard","response","get","process","env","REACT_APP_API_URL","data","error","console","handleAddUser","trim","post","name","success","handleClaimPoints","userId","pointsClaimed","alert","children","className","type","value","onChange","e","target","placeholder","onClick","map","user","_id","disabled"],"sources":["D:/user-ranking-system/frontend/src/components/UserManager.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { toast } from 'react-toastify';\n\nconst UserManager = () => {\n    const [users, setUsers] = useState([]);\n    const [newUserName, setNewUserName] = useState('');\n    const [selectedUserId, setSelectedUserId] = useState('');\n    const [awardedPoints, setAwardedPoints] = useState(null);\n\n    const fetchLeaderboard = async () => {\n        try {\n            const response = await axios.get(`${process.env.REACT_APP_API_URL}/api/leaderboard`);\n            setUsers(response.data);\n        } catch (error) {\n            console.error('Error fetching leaderboard:', error);\n        }\n    };\n\n    useEffect(() => {\n        fetchLeaderboard();\n    }, []);\n\n    const handleAddUser = async () => {\n        if (newUserName.trim()) {\n            try {\n                await axios.post(`${process.env.REACT_APP_API_URL}/api/users`, { name: newUserName });\n                setNewUserName('');\n                toast.success(\"User created successfully!\");\n                fetchLeaderboard();\n            } catch (error) {\n                console.error('Error adding user:', error);\n            }\n        }\n    };\n\n    const handleClaimPoints = async () => {\n        if (!selectedUserId) return;\n        try {\n            const response = await axios.post(`${process.env.REACT_APP_API_URL}/api/claim`, { userId: selectedUserId });\n            setAwardedPoints(response.data.pointsClaimed);\n            fetchLeaderboard();\n        } catch (error) {\n            setAwardedPoints(null);\n            alert('Error claiming points');\n        }\n    };\n\n    return (\n       <>\n            <h2 className=\"text-2xl font-bold mb-4 text-blue-700\">User Manager</h2>\n\n            {/* Add New User */}\n            <div className=\"flex mb-6\">\n                <input\n                    type=\"text\"\n                    value={newUserName}\n                    onChange={(e) => setNewUserName(e.target.value)}\n                    placeholder=\"Enter new user name\"\n                    className=\"border border-gray-300 rounded-l px-4 py-2 w-full focus:outline-none\"\n                />\n                <button\n                    onClick={handleAddUser}\n                    className=\"bg-blue-600 text-white px-4 py-2 rounded-r hover:bg-blue-700\"\n                >\n                    Add User\n                </button>\n            </div>\n\n            {/* User Selection & Claim Points */}\n            <div className=\"mb-6\">\n                <h3 className=\"text-lg font-semibold mb-2 text-blue-600\">Claim Points</h3>\n                <div className=\"flex items-center\">\n                    <select\n                        value={selectedUserId}\n                        onChange={e => setSelectedUserId(e.target.value)}\n                        className=\"border border-gray-300 rounded px-4 py-2 mr-2 focus:outline-none\"\n                    >\n                        <option value=\"\">-- Select User --</option>\n                        {users.map(user => (\n                            <option key={user._id} value={user._id}>\n                                {user.name}\n                            </option>\n                        ))}\n                    </select>\n                    <button\n                        onClick={handleClaimPoints}\n                        disabled={!selectedUserId}\n                        className={`px-4 py-2 rounded ${\n                            selectedUserId\n                                ? 'bg-green-600 hover:bg-green-700 text-white'\n                                : 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                        }`}\n                    >\n                        Claim Points\n                    </button>\n                </div>\n                {awardedPoints !== null && (\n                    <div className=\"mt-2 text-green-700 font-semibold\">\n                        Points Awarded: {awardedPoints}\n                    </div>\n                )}\n            </div>\n        </>\n    );\n};\n\nexport default UserManager;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}